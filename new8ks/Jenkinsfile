pipeline{
    agent any
   
    environment{
       SONAR_HOME = tool('sonar-scanner')
    }
    stages{
        
        stage("static code analysis"){
            steps{
                withSonarQubeEnv('sonar-scanner') {
                
            }
        }
        }
        stage("wait for quality gate"){
            steps{
                script{
                    def qd = waitForQualityGate(abortpipeline: false,credentialsId: 'sonarqube' ){
                        if (qd.status != 'ok'){
                            echo " the pile has failed based ${qd.status}"
                        }
                    }

                }
            }
           
        }
        stage("Dependency checks") {
           steps {
        dependencyCheck additionalArguments: '-f table -o reports/ -s src/', odcInstallation: 'owasp'
             }
        }


    }
    
}    bat '''
                     %SONAR_HOME%  -Dsonar.projectName = "chatai" ^
                    -Dsoanr.projectKey = "chatai"
                    '''